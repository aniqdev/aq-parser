"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function is_active(e,t){if(e===t)return"active"}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),ChatComponent=React.createClass({displayName:"ChatComponent",getInitialState:function(){return{liked:!1,email_adress:this.props.order_info.br_email,email_subject:this.props.order_info.json_orderItems[0].prodName["@cdata"],email_body:"",msg_body:"",add_class:"",user_id:""}},fillEmail:function(e){this.setState({email_adress:e.target.value})},fillSubj:function(e){this.setState({email_subject:e.target.value})},fillMessageEmail:function(e){this.setState({email_body:e.target.value})},fillMessageHood:function(e){this.setState({msg_body:e.target.value})},fillUserId:function(e){this.setState({user_id:e.target.value})},sendEmail:function(e){e.preventDefault();var t=this,a=this.state;$.post("/ajax.php?action=ajax-invoice-sender",{sendemail:"1",user_email:a.email_adress,email_subject:a.email_subject,email_body:a.email_body},function(e){e.sendemail_ans?t.setState({add_class:"glyphicon-ok"}):t.setState({add_class:"glyphicon-warning-sign"})},"json")},sendHood:function(e){e.preventDefault();var t=this.state;$.post("/ajax.php?action=hood-messages",{send:"ajax",user_id:t.user_id,text:t.msg_body},function(e){},"json")},render:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("form",{className:"row",method:"POST",id:"js-inv-sendemail-form"},React.createElement("div",{className:"col-sm-6"},React.createElement("input",{type:"hidden",name:"sendemail"}),React.createElement("input",{onChange:this.fillEmail,type:"text",className:"form-control",name:"user_email",value:this.state.email_adress}),React.createElement("br",null),React.createElement("input",{onChange:this.fillSubj,type:"text",className:"form-control",name:"email_subject",value:this.state.email_subject}),React.createElement("br",null),React.createElement("textarea",{onChange:this.fillMessageEmail,className:"form-control",name:"email_body",id:"editor1",cols:"30",rows:"11"},this.state.email_body),React.createElement("br",null),React.createElement("button",{onClick:this.sendEmail,className:"glyphicon op-modal-btn pull-right "+this.state.add_class,type:"button"},"Send Email")),React.createElement("div",{className:"col-sm-6"},React.createElement("input",{type:"hidden",name:"action",value:"send_hood"}),React.createElement("input",{onChange:this.fillUserId,type:"text",className:"form-control",name:"user_id",value:this.state.user_id,placeholder:"user id"}),React.createElement("br",null),React.createElement("textarea",{onChange:this.fillMessageHood,className:"form-control",name:"hood_body",cols:"30",rows:"11"},this.state.msg_body),React.createElement("br",null),React.createElement("button",{onClick:this.sendHood,className:"op-modal-btn glyphicon pull-right",id:"js-inv-sendebay",type:"button"},"Send Message"))))}});$("#ho_js_deligator").on("click",".ho-modal-show",function(){$("#js_ho_modal").modal("show");var e=this.id;$.post("ajax.php?action=hood-orders",{action:"get_order_info",gig_hood_order_id:e},function(e){ReactDOM.render(React.createElement(ModalContent,{order_info:e}),document.getElementById("react_ho_modal"))},"json")});var ModalContent=function(e){function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.default_state={modal_title:a.props.order_info.br_firstName+" "+a.props.order_info.br_lastName+" ("+a.props.order_info.br_email+")",route:window.location.hash.substr(1)},a.state=a.default_state,a.componentWillReceiveProps=a.componentWillReceiveProps.bind(a),a}return _inherits(t,React.Component),_createClass(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({modal_title:e.order_info.br_firstName+" "+e.order_info.br_lastName+" ("+e.order_info.br_email+")"})}},{key:"modalClose",value:function(){$("#js_ho_modal").modal("hide")}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("hashchange",function(){e.setState({route:window.location.hash.substr(1)})})}},{key:"render",value:function(){var e;switch(this.state.route){case"chat":e=ChatComponent;break;default:e=OrderInfoComponent}return React.createElement("div",{className:"op-main-modal ho-modal"},React.createElement("div",{className:"op-modal-header"},this.state.modal_title,React.createElement("div",{className:"op-modal-tabs pull-right"},React.createElement("a",{href:"#info",className:"op-modal-tab "+is_active(this.state.route,"info")},"Info"),React.createElement("a",{href:"#chat",className:"op-modal-tab "+is_active(this.state.route,"chat")},"Chat"))),React.createElement("div",{className:"op-modal-body"},React.createElement(e,{order_info:this.props.order_info})),React.createElement("div",{className:"op-modal-footer"},React.createElement("a",{onClick:this.modalClose,className:"op-modal-btn"},"close")))}}]),t}(),OrderInfoComponent=React.createClass({displayName:"OrderInfoComponent",getInitialState:function(){return{liked:!1}},toggleLiked:function(){this.setState({liked:!this.state.liked})},render:function(){return React.createElement("pre",null,this.props.order_info.info)}}),PlatiComponent=React.createClass({displayName:"PlatiComponent",toggleLiked:function(){this.setState({liked:!this.state.liked})},getInitialState:function(){return{liked:!1}},render:function(){return this.state.liked,React.createElement("h2",{className:"photo"},"Plati.ru item")}});